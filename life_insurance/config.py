"""
生命保険料控除分析システム - 設定ファイル

システム全体で使用する定数、税率テーブル、デフォルト値を定義します。
"""

from typing import List, Tuple

# =============================================================================
# バージョン情報
# =============================================================================

VERSION = "2.0.0"
LAST_UPDATED = "2025-10-18"

# =============================================================================
# 税率設定（2024年度）
# =============================================================================

# 所得税率テーブル（課税所得, 税率, 控除額）
TAX_BRACKETS: List[Tuple[float, float, float]] = [
    (1950000, 0.05, 0),  # 195万円以下: 5%
    (3300000, 0.10, 97500),  # 195万～330万円: 10%
    (6950000, 0.20, 427500),  # 330万～695万円: 20%
    (9000000, 0.23, 636000),  # 695万～900万円: 23%
    (18000000, 0.33, 1536000),  # 900万～1800万円: 33%
    (40000000, 0.40, 2796000),  # 1800万～4000万円: 40%
    (float("inf"), 0.45, 4796000),  # 4000万円超: 45%
]

# 住民税率（一律）
RESIDENT_TAX_RATE = 0.10

# 復興特別所得税率
RECONSTRUCTION_TAX_RATE = 0.021

# =============================================================================
# 生命保険料控除設定
# =============================================================================

# 旧生命保険料控除の最大額
OLD_INSURANCE_DEDUCTION_MAX = 50000

# 新生命保険料控除の最大額（将来対応用）
NEW_INSURANCE_DEDUCTION_MAX = 40000

# 旧生命保険料控除の計算区分（保険料, 控除率, 加算額）
OLD_DEDUCTION_BRACKETS: List[Tuple[float, float, float]] = [
    (25000, 1.0, 0),  # 25,000円以下: 全額
    (50000, 0.5, 12500),  # 25,001～50,000円: 保険料×50% + 12,500円
    (100000, 0.25, 25000),  # 50,001～100,000円: 保険料×25% + 25,000円
]

# =============================================================================
# 保険運用設定
# =============================================================================

# デフォルト運用利回り（年率）
DEFAULT_RETURN_RATE = 0.0125  # 1.25%

# 解約控除率（経過年数による）
# キー: 経過年数, 値: 控除率
CANCELLATION_PENALTY_RATES = {
    1: 0.10,  # 1年目: 10%
    2: 0.08,  # 2年目: 8%
    3: 0.06,  # 3年目: 6%
    4: 0.04,  # 4年目: 4%
    5: 0.02,  # 5年目: 2%
    # 6年目以降: 0%
}

# =============================================================================
# 再投資オプション設定
# =============================================================================

# 部分解約後の資金運用オプション
REINVESTMENT_OPTIONS = {
    "預金（年利1%）": 0.01,
    "運用なし（現金保有）": 0.00,
    "投資信託（年利3%）": 0.03,
    "投資信託（年利5%）": 0.05,
}

# デフォルト再投資利回り
DEFAULT_REINVEST_RATE = 0.01  # 預金1%

# =============================================================================
# 一時所得設定
# =============================================================================

# 一時所得の特別控除額
TEMPORARY_INCOME_DEDUCTION = 500000  # 50万円

# 一時所得の課税割合
TEMPORARY_INCOME_TAX_RATIO = 0.5  # 1/2課税

# =============================================================================
# 分析パラメータ
# =============================================================================

# デフォルト最大分析年数
DEFAULT_MAX_YEARS = 20

# 戦略ランキングのデフォルトパラメータ
DEFAULT_INTERVAL_RANGE = [1, 2, 3, 4, 5]  # 部分解約の間隔（年）
DEFAULT_RATE_RANGE = [0.21, 0.51, 0.81]  # 部分解約の割合
DEFAULT_FULL_WITHDRAWAL_YEARS = [10, 15, 20]  # 全解約の年数
DEFAULT_SWITCH_YEARS = [10, 15]  # 乗り換えの年数
DEFAULT_SWITCH_RATES = [0.01, 0.03, 0.05]  # 乗り換え手数料率

# =============================================================================
# UI設定
# =============================================================================

# Streamlitページタイトル
PAGE_TITLE = "💰 生命保険料控除分析システム"

# ページ設定
PAGE_CONFIG = {
    "page_title": "生命保険料控除分析",
    "page_icon": "💰",
    "layout": "wide",
}

# 数値フォーマット
NUMBER_FORMAT = "{:,.0f}"
CURRENCY_FORMAT = "{:,.0f}円"
PERCENTAGE_FORMAT = "{:.1f}%"

# =============================================================================
# グラフ設定
# =============================================================================

# 日本語フォント
JAPANESE_FONTS = ["Meiryo", "MS Gothic", "Yu Gothic", "DejaVu Sans"]

# カラーパレット
COLOR_PALETTE = {
    "primary": "#1f77b4",
    "success": "#2ca02c",
    "warning": "#ff7f0e",
    "danger": "#d62728",
    "info": "#17becf",
}

# =============================================================================
# ファイルパス
# =============================================================================

# データディレクトリ（将来的にデータ保存用）
DATA_DIR = "data"

# ログディレクトリ（将来的にログ出力用）
LOG_DIR = "logs"

# =============================================================================
# デバッグ設定
# =============================================================================

# デバッグモード
DEBUG = False

# 詳細ログ出力
VERBOSE = False
